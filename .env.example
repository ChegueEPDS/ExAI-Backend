# =========================
# Server / URLs / CORS
# =========================
# Used by: `app.js` — runtime environment (development/production).
NODE_ENV=development
# Used by: `app.js` — bind address for HTTP server.
HOST=0.0.0.0
# Used by: `app.js` — port for HTTP server.
PORT=3000
# Used by: `services/datasetIngestionService.js`, `services/standardIngestionService.js`, `controllers/billingController.js` — absolute base URL for internal callbacks + links.
BASE_URL=http://localhost:3000
# Used by: `controllers/billingController.js` — frontend base URL for redirects/links.
FRONTEND_BASE_URL=http://localhost:4200
# Optional: override SPA dist folder path served by backend, i dont use it
# Used by: `app.js` — overrides SPA dist folder path (admin UI).
FRONTEND_DIST=
# Used by: `app.js` — CORS allow-list (comma separated origins).
# Supports:
# - exact origins: https://certs.atexdb.eu
# - wildcard origin: https://*.insp-ex.com
# - hostname suffix: *.atexdb.eu
CORS_ALLOWED_ORIGINS=http://localhost:4200,http://localhost:8100

# Optional: disable background schedulers/workers (0/1)
# Used by: `app.js` — disables schedulers/workers when set.
DISABLE_BACKGROUND_JOBS=0

# =========================
# Database / Auth
# =========================
# Used by: `config/db.js` — MongoDB connection string.
MONGO_URI=
# Used by: `middlewares/authMiddleware.js`, `controllers/authController.js` — JWT signing/verifying secret.
JWT_SECRET=
# Used by: `controllers/authController.js` — JWT expiry for web clients.
JWT_EXPIRES_IN_WEB=1h
# Used by: `controllers/authController.js` — JWT expiry for mobile clients.
JWT_EXPIRES_IN_MOBILE=30d
# legacy default
# Used by: `controllers/authController.js` — legacy default JWT expiry.
JWT_EXPIRES_IN=1h

# =========================
# OpenAI (embeddings + chat + assistants)
# =========================
# Used by: `controllers/governedChatController.js`, `services/*IngestionService.js`, `helpers/openaiCertExtractor.js` — OpenAI API key.
OPENAI_API_KEY=

# Embeddings
# Used by: `services/datasetIngestionService.js`, `services/standardIngestionService.js`, `controllers/conversationController.js` — embedding model name.
RAG_EMBEDDING_MODEL=text-embedding-3-small

# Chat models
# Used by: `controllers/governedChatController.js`, `controllers/conversationController.js` — main Chat Completions model.
FILE_CHAT_COMPLETIONS_MODEL=gpt-5-mini
# Used by: `controllers/governedChatController.js` — require strict numericEvidence for numeric claims (0/1). Turn off to allow ChatGPT-like free-form numbers.
GOVERNED_REQUIRE_NUMERIC_EVIDENCE=1
# Used by: `controllers/conversationController.js` — fallback Chat Completions model.
FILE_CHAT_COMPLETIONS_FALLBACK=gpt-5-mini
# Used by: `services/summaryCore.js`, `services/qaCore.js`, `controllers/conversationController.js` — summary model.
SUMMARY_COMPLETIONS_MODEL=gpt-5-mini
# Used by: `services/qaCore.js`, `services/summaryCore.js` — summary fallback model.
SUMMARY_COMPLETIONS_FALLBACK=gpt-5-mini

# Legacy "file chat" tuning (Assistants / vector-store based endpoints)
# Used by: `controllers/conversationController.js` — enable/disable background vector store search in legacy file chat.
FILE_CHAT_BACKGROUND_VS=0
# Used by: `controllers/conversationController.js` — max background vector store results considered.
FILE_CHAT_BACKGROUND_VS_MAX=0
# Used by: `controllers/conversationController.js` — number of background vector store hits used.
FILE_CHAT_BACKGROUND_VS_HITS=0
# Used by: `controllers/conversationController.js` — per-file cap for background vector store hits.
FILE_CHAT_BACKGROUND_VS_PER_FILE=0
# Used by: `controllers/conversationController.js` — evidence pass behavior in legacy file chat.
FILE_CHAT_EVIDENCE_PASS=1
# Used by: `controllers/conversationController.js` — enable Excel-specific LM flow.
FILE_CHAT_EXCEL_LM=0
# Used by: `controllers/conversationController.js` — model for Excel-specific LM flow.
FILE_CHAT_EXCEL_MODEL=gpt-5-mini
# Used by: `controllers/conversationController.js` — enable planner stage for formatting.
FILE_CHAT_FORMAT_PLANNER=0
# Used by: `controllers/conversationController.js` — model for planner stage.
FILE_CHAT_FORMAT_PLANNER_MODEL=gpt-5-mini

# Optional: concurrency/retry tuning
# Used by: `services/qaCore.js` — parallel OpenAI calls (best-effort).
OPENAI_PARALLEL=4
# Used by: `controllers/certificateDraftController.js` — OpenAI retry attempts for extraction calls.
OPENAI_RETRY_ATTEMPTS=5
# Used by: `controllers/certificateDraftController.js` — OpenAI retry base delay (ms).
OPENAI_RETRY_BASE_MS=500
# Used by: `controllers/certificateDraftController.js` — OpenAI retry max delay (ms).
OPENAI_RETRY_MAX_MS=5000
# Used by: `controllers/conversationController.js` — max pages processed in legacy vector-store ingestion.
OPENAI_VS_MAX_PAGES=200

# Assistants (legacy endpoints)
# Used by: `services/assistantRunner.js`, `controllers/conversationController.js` — per-tenant assistant selection (fallback).
ASSISTANT_ID=
# Used by: `config/assistants.js`, `services/conversationService.js` — default assistant id.
ASSISTANT_ID_DEFAULT=
# Used by: `config/assistants.js` — tenant-specific assistant id (epds).
ASSISTANT_ID_EPDS=
# Used by: `helpers/openaiCertExtractor.js` — certificate extraction assistant id override.
ASSISTANT_ID_CERT=
# Used by: `config/assistants.js` — tenant-specific assistant id.
ASSISTANT_ID_PGMED=
# Used by: `config/assistants.js` — tenant-specific assistant id.
ASSISTANT_ID_VIRESOL=
# Used by: `config/assistants.js` — tenant-specific assistant id.
ASSISTANT_ID_XIII=
# Used by: `config/assistants.js` — tenant-specific assistant id.
ASSISTANT_ID_TUZ=
# Used by: `config/assistants.js` — tenant-specific assistant id.
ASSISTANT_ID_STAND98=
# Used by: `config/assistants.js` — tenant-specific assistant id.
ASSISTANT_ID_BGC=
# Used by: `config/assistants.js` — tenant-specific assistant id.
ASSISTANT_ID_DRND=
# Used by: `config/assistants.js` — tenant-specific assistant id.
ASSISTANT_ID_ARCHICON=
# Used by: `config/assistants.js` — tenant-specific assistant id.
ASSISTANT_ID_ROBEX=
# Used by: `config/assistants.js`, `controllers/conversationController.js` — tenant-specific assistant id (wolff).
ASSISTANT_ID_WOLFF=

# =========================
# Governed RAG (datasets + standards)
# =========================
# Used by: `controllers/governedChatController.js`, `controllers/datasetController.js`,
# `services/datasetIngestionService.js`, `services/standardIngestionService.js` —
# verbose end-to-end logging for the governed flow (0/1).
DEBUG_GOVERNED=0
# Dataset ingestion limits
# Used by: `services/datasetIngestionService.js` — max spreadsheet rows indexed.
DATASET_MAX_ROWS=20000
# Used by: `services/datasetIngestionService.js` — max spreadsheet columns indexed.
DATASET_MAX_COLS=128
# Used by: `services/datasetIngestionService.js` — max numeric cells stored for traceability.
DATASET_MAX_NUMERIC_CELLS=200000
# Used by: `services/datasetIngestionService.js` — max document chunks per dataset file.
DATASET_MAX_DOC_CHUNKS=120

# Document chunking
# Used by: `services/datasetIngestionService.js` — document chunk size (approx tokens).
DOCUMENT_CHUNK_TOKENS=450
# Used by: `services/datasetIngestionService.js` — document chunk overlap (approx tokens).
DOCUMENT_CHUNK_OVERLAP=80

# Table schema (LLM-assisted, optional)
# Used by: `services/tableSchemaService.js`, `services/datasetIngestionService.js` — enable/disable LLM-based spreadsheet schema inference (0/1).
TABLE_SCHEMA_LLM_ENABLED=1
# Used by: `services/tableSchemaService.js` — model for table schema inference.
TABLE_SCHEMA_MODEL=gpt-5-mini
# Used by: `services/datasetIngestionService.js` — spreadsheet preview rows passed to schema inference.
TABLE_SCHEMA_PREVIEW_ROWS=60
# Used by: `services/datasetIngestionService.js` — spreadsheet preview cols passed to schema inference.
TABLE_SCHEMA_PREVIEW_COLS=20

# Used by: `services/tableToolService.js` — steady-state heuristic window size (last N points).
TABLE_STEADY_N=3

# Measurement evaluator (deterministic Excel analysis)
# Used by: `services/measurementEvaluatorService.js`, `controllers/governedChatController.js` — enable/disable measurement evaluator tool for risk/measurement questions (0/1).
MEAS_EVAL_ENABLED=1
# Used by: `services/measurementEvaluatorService.js` — max number of XLSX files evaluated per question.
MEAS_EVAL_MAX_FILES=3
# Used by: `services/measurementEvaluatorService.js` — max sheets evaluated per XLSX file.
MEAS_EVAL_MAX_SHEETS=12
# Used by: `services/measurementEvaluatorService.js` — max "Table N" blocks evaluated per sheet.
MEAS_EVAL_MAX_TABLES=8
# Used by: `services/measurementEvaluatorService.js` — which measurement points count as "external surface" (comma-separated).
MEAS_EXT_POINTS=T10,T11,T4
# Optional limits (policy hints). Prefer citing limits from standards via quotes; if not cited, they may be highlighted as unverified.
# Used by: `services/measurementEvaluatorService.js` — gas temperature class limit (e.g. T4=135°C).
MEAS_LIMIT_GAS_T4_C=
# Used by: `services/measurementEvaluatorService.js` — dust surface temperature limit (e.g. T70°C).
MEAS_LIMIT_DUST_SURFACE_C=

# Used by: `services/measurementEvaluatorService.js` — maximum measurement-point token number (prevents false matches like T50/T55 from sheet names).
MEAS_POINT_MAX=25
# Used by: `services/measurementEvaluatorService.js` — significant delta threshold (°C) for Table 1..4 comparisons.
MEAS_COMPARE_DELTA_C=3
# Used by: `services/measurementEvaluatorService.js` — how many last time columns are treated as "steady-state window" (for max/avg).
MEAS_STEADY_LAST_N=3
# Used by: `services/measurementEvaluatorService.js` — engineer-style difference thresholds (°C) used for categorizing deltas/spreads.
MEAS_DIFF_NOISE_C=2
MEAS_DIFF_NOTE_C=3
MEAS_DIFF_CRITICAL_C=5

# XLSX planner (LLM chooses which deterministic XLSX tool to run)
# Used by: `services/xlsxPlannerService.js`, `controllers/governedChatController.js`
XLSX_PLANNER_ENABLED=1
# Used by: `services/xlsxPlannerService.js`
XLSX_PLANNER_MODEL=gpt-5-mini
# Used by: `services/xlsxPreviewService.js` — XLSX content preview limits for the planner.
XLSX_PLANNER_PREVIEW_MAX_FILES=3
XLSX_PLANNER_PREVIEW_MAX_SHEETS=12
XLSX_PLANNER_PREVIEW_MAX_ROWS=8000
XLSX_PLANNER_PREVIEW_MAX_LABELS=16
XLSX_PLANNER_PREVIEW_MAX_CHARS=35000

# PDF vision (figures/diagrams) — optional, best-effort
# Used by: `services/pdfVisionService.js`, `services/datasetIngestionService.js` — enable/disable PDF page rendering + vision extraction (requires GraphicsMagick/ImageMagick for `pdf2pic`).
PDF_VISION_ENABLED=0
# Used by: `services/pdfVisionService.js` — max PDF pages to analyze with vision.
PDF_VISION_MAX_PAGES=2
# Used by: `services/pdfVisionService.js` — render density for vision (DPI).
PDF_VISION_DENSITY=150
# Used by: `services/pdfVisionService.js` — render width (px).
PDF_VISION_WIDTH=1400
# Used by: `services/pdfVisionService.js`, `controllers/visionController.js` — vision model for image understanding.
VISION_MODEL=gpt-4o-mini

# Standard chunking
# Used by: `services/standardIngestionService.js` — standard chunk size (approx tokens).
STANDARD_CHUNK_TOKENS=450
# Used by: `services/standardIngestionService.js` — standard chunk overlap (approx tokens).
STANDARD_CHUNK_OVERLAP=80
# Used by: `services/standardIngestionService.js` — max tokens per clause chunk before splitting.
STANDARD_CLAUSE_MAX_TOKENS=500
# Used by: `services/standardIngestionService.js` — max number of stored clauses per standard.
STANDARD_MAX_CLAUSES=1200

# Standard set router
# Used by: `controllers/governedChatController.js` — enable/disable LLM routing for standard-set selection.
STANDARD_ROUTER_LLM=1
# Used by: `controllers/governedChatController.js` — model for standard-set routing.
STANDARD_ROUTER_MODEL=gpt-5-mini
# Used by: `controllers/governedChatController.js` — enable/disable fuzzy set matching.
STANDARD_SET_FUZZY_ENABLED=true
# Used by: `controllers/governedChatController.js` — similarity threshold for fuzzy set matching.
STANDARD_SET_FUZZY_THRESHOLD=0.86

# Retrieval sizes
# Used by: `controllers/governedChatController.js` — final topK spreadsheet row chunks.
GOVERNED_RAG_TOPK=14
# Used by: `controllers/governedChatController.js` — final topK document chunks.
GOVERNED_RAG_DOC_TOPK=10
# Used by: `controllers/governedChatController.js` — final topK image/figure chunks (vision).
GOVERNED_RAG_IMG_TOPK=6
# Used by: `controllers/governedChatController.js` — final topK standard clauses.
GOVERNED_RAG_STD_TOPK=12
# Used by: `controllers/governedChatController.js` — candidate pool size (tables) from vector search.
GOVERNED_RAG_TABLE_CANDIDATES=50
# Used by: `controllers/governedChatController.js` — candidate pool size (docs) from vector search.
GOVERNED_RAG_DOC_CANDIDATES=40
# Used by: `controllers/governedChatController.js` — candidate pool size (images) from vector search.
GOVERNED_RAG_IMG_CANDIDATES=20
# Used by: `controllers/governedChatController.js` — candidate pool size (standards) from vector search.
GOVERNED_RAG_STD_CANDIDATES=60
# Used by: `controllers/governedChatController.js` — cap selected table chunks per filename.
GOVERNED_RAG_TABLE_PER_FILE=3
# Used by: `controllers/governedChatController.js` — cap selected doc chunks per filename.
GOVERNED_RAG_DOC_PER_FILE=3
# Used by: `controllers/governedChatController.js` — cap selected image chunks per filename.
GOVERNED_RAG_IMG_PER_FILE=1
# Used by: `controllers/governedChatController.js` — cap selected standard clauses per standardRef.
GOVERNED_RAG_STD_PER_STANDARD=6

# Used by: `controllers/governedChatController.js` — max candidates fetched per kind for hybrid/rerank stage.
HYBRID_MAX_CANDIDATES=80
# Used by: `controllers/governedChatController.js`, `helpers/hybridScore.js` — weight of keyword score added to vector score.
HYBRID_ALPHA=0.25

# Reranking (optional, recommended for compliance)
# Used by: `services/rerankService.js`, `controllers/governedChatController.js` — enable/disable LLM reranking of candidates (0/1).
RERANK_ENABLED=1
# Used by: `services/rerankService.js` — model for reranking.
RERANK_MODEL=gpt-5-mini
# Used by: `services/rerankService.js` — max items per kind passed to reranker.
RERANK_MAX_ITEMS=40
# Used by: `controllers/governedChatController.js` — max Mongo candidates scanned when Pinecone is disabled (tables).
GOVERNED_RAG_MAX_CANDIDATES=3500
# Used by: `controllers/governedChatController.js` — max Mongo candidates scanned when Pinecone is disabled (docs).
GOVERNED_RAG_MAX_DOC_CANDIDATES=2500

# =========================
# Pinecone (optional vector store)
# =========================
# Used by: `services/pineconeService.js` — verbose Pinecone request logging (0/1).
DEBUG_PINECONE=0
# Used by: `services/pineconeService.js` — enable/disable Pinecone (0/1). If empty, key+index auto-enables.
PINECONE_ENABLED=0
# Used by: `services/pineconeService.js` — Pinecone API key.
PINECONE_API_KEY=
# Used by: `services/pineconeService.js` — Pinecone index name.
PINECONE_INDEX=
# Optional for serverless
# Used by: `services/pineconeService.js` — Pinecone host (serverless).
PINECONE_HOST=
# Optional: fixed namespace or template (defaults to t:{tenantId}:p:{projectId})
# Used by: `services/pineconeService.js` — override namespace with a fixed value.
PINECONE_NAMESPACE=
# Used by: `services/pineconeService.js` — namespace template with `{tenantId}` and `{projectId}`.
PINECONE_NAMESPACE_TEMPLATE=t:{tenantId}:p:{projectId}
# Used by: `services/pineconeService.js` — upsert batch size.
PINECONE_UPSERT_BATCH=100

# =========================
# Azure Blob Storage
# =========================
# Used by: `services/azureBlobService.js` — Azure Storage connection string.
AZURE_STORAGE_CONNECTION_STRING=
# Used by: `services/azureBlobService.js` — blob container name.
AZURE_BLOB_CONTAINER_NAME=certificates

# =========================
# Azure Document Intelligence (used by /api/pdfcert)
# =========================
# Used by: `controllers/imgOcrController.js` — Azure Document Intelligence endpoint.
AZURE_FORM_RECOGNIZER_ENDPOINT=
# Used by: `controllers/imgOcrController.js` — Azure Document Intelligence key.
AZURE_FORM_RECOGNIZER_KEY=
# Used by: `controllers/imgOcrController.js` — polling interval in ms for PDF OCR.
AZURE_FORM_RECOGNIZER_POLL_INTERVAL_MS=2500
# Used by: `controllers/imgOcrController.js` — timeout in ms for PDF OCR.
AZURE_FORM_RECOGNIZER_TIMEOUT_MS=300000

# =========================
# Azure OCR (images)
# =========================
# Used by: `controllers/imgOcrController.js` — Azure Computer Vision endpoint (image OCR).
AZURE_OCR_ENDPOINT=
# Used by: `controllers/imgOcrController.js` — Azure Computer Vision key (image OCR).
AZURE_OCR_KEY=

# =========================
# Azure Custom Vision (fireController)
# =========================
# Used by: `controllers/fireController.js` — Custom Vision endpoint.
AZURE_ENDPOINT=
# Used by: `controllers/fireController.js` — Custom Vision prediction key.
PREDICTION_KEY=
# Used by: `controllers/fireController.js` — upload folder for annotated images.
UPLOAD_FOLDER=uploads

# =========================
# Azure AI Search (optional)
# =========================
# Used by: `helpers/azureSearchHelpers.js` — Azure AI Search URL.
AZURE_SEARCH_URL=
# Used by: `helpers/azureSearchHelpers.js` — Azure AI Search index name.
AZURE_INDEX_NAME=
# Used by: `helpers/azureSearchHelpers.js` — Azure AI Search API key.
AZURE_API_KEY=

# =========================
# Azure Entra ID (Microsoft Graph)
# =========================
# Used by: `services/graphClient.js` — Entra tenant ID.
AZURE_TENANT_ID=
# Used by: `services/graphClient.js` — Entra client ID.
AZURE_CLIENT_ID=
# Used by: `services/graphClient.js` — Entra client secret.
AZURE_CLIENT_SECRET=

# =========================
# Azure Functions (DXF processing)
# =========================
# Used by: `services/dxfTracker.js` — Azure Functions base URL (legacy).
AZURE_FUNCTION_URL=
# Used by: `services/dxfTracker.js` — Azure Functions key (legacy).
AZURE_FUNCTION_KEY=
# Used by: `services/dxfTracker.js` — DXF function base URL (preferred).
DXF_FUNC_URL=
# Used by: `services/dxfTracker.js` — DXF function key (preferred).
DXF_FUNC_CODE=
# Used by: `services/dxfTracker.js` — per-endpoint override code.
DXF_FUNC_CODE_START=
# Used by: `services/dxfTracker.js` — per-endpoint override code.
DXF_FUNC_CODE_STATUS=
# Used by: `services/dxfTracker.js` — per-endpoint override code.
DXF_FUNC_CODE_RESULT=
# Used by: `services/dxfTracker.js` — per-endpoint override code.
DXF_FUNC_CODE_SYNC=

# =========================
# Mail / Brevo
# =========================
# Used by: `services/mailService.js`, `controllers/authController.js` — sender UPN/email for Graph mail.
MAIL_SENDER_UPN=
# Used by: `services/mailService.js` — save sent items (0/1).
MAIL_SAVE_TO_SENT=0

# Used by: `services/brevoService.js` — Brevo API key.
BREVO_API_KEY=
# Used by: `services/brevoService.js` — Brevo base URL.
BREVO_BASE_URL=
# Used by: `services/brevoService.js` — request timeout (ms).
BREVO_TIMEOUT_MS=10000
# Used by: `services/brevoService.js` — verbose debug logging (0/1).
BREVO_DEBUG=0
# Used by: `services/brevoService.js` — trace logging (0/1).
BREVO_TRACE=0
# Used by: `services/brevoService.js` — enable welcome emails (0/1).
BREVO_SEND_WELCOME=0
# Used by: `services/brevoService.js` — welcome template id.
BREVO_WELCOME_TEMPLATE_ID=
# Used by: `services/brevoService.js` — default list id.
BREVO_LIST_ID=
# optional multiple list ids (comma separated)
# Used by: `services/brevoService.js` — multiple list ids (comma separated).
BREVO_LIST_IDS=

# =========================
# Billing / Stripe
# =========================
# Used by: `controllers/billingController.js`, `controllers/billingWebhookController.js` — Stripe secret key.
STRIPE_SECRET_KEY=
# Used by: `controllers/billingWebhookController.js` — Stripe webhook secret.
STRIPE_WEBHOOK_SECRET=
# Used by: `controllers/billingController.js` — Stripe price id for PRO monthly.
STRIPE_PRICE_PRO=
# Used by: `controllers/billingController.js` — Stripe price id for PRO yearly.
STRIPE_PRICE_PRO_YEARLY=
# Used by: `controllers/billingController.js` — Stripe price id for TEAM monthly.
STRIPE_PRICE_TEAM=
# Used by: `controllers/billingController.js` — Stripe price id for TEAM yearly.
STRIPE_PRICE_TEAM_YEARLY=
# Used by: `controllers/billingController.js` — whether to collect phone in checkout (0/1).
STRIPE_CHECKOUT_COLLECT_PHONE=0
# Used by: `controllers/billingController.js` — success redirect URL (fallback if not using FRONTEND_BASE_URL).
BILLING_SUCCESS_URL=
# Used by: `controllers/billingController.js` — cancel redirect URL (fallback if not using FRONTEND_BASE_URL).
BILLING_CANCEL_URL=
# Used by: `controllers/billingController.js` — delay before redirect back from portal (ms).
PORTAL_RETURN_WAIT_MS=0

# =========================
# reCAPTCHA v3 (login/forgot password protection)
# =========================
# Used by: `middlewares/captchaMiddleware.js` — reCAPTCHA secret key.
RECAPTCHA_SECRET=
# Used by: `middlewares/captchaMiddleware.js` — minimum allowed score.
RECAPTCHA_MIN_SCORE=0.5
# Disable verification entirely (0/1) – useful for local dev only
# Used by: `middlewares/captchaMiddleware.js` — disable reCAPTCHA checks.
RECAPTCHA_DISABLED=0
# Used by: `middlewares/captchaMiddleware.js` — enable stdout tracing (0/1).
RECAPTCHA_TRACE_STDOUT=0
# Used by: `middlewares/captchaMiddleware.js` — allow bypass header if enabled.
RECAPTCHA_BYPASS_ENABLED=false
# Used by: `middlewares/captchaMiddleware.js` — required value for bypass header.
RECAPTCHA_BYPASS_KEY=
# Used by: `middlewares/captchaMiddleware.js` — bypass header name.
RECAPTCHA_BYPASS_HEADER=x-captcha-bypass

# Legacy captcha flags (also accepted by middleware)
# Used by: `middlewares/captchaMiddleware.js` — legacy disable flag.
CAPTCHA_DISABLED=0
# Used by: `middlewares/captchaMiddleware.js` — legacy bypass enable flag.
CAPTCHA_BYPASS_ENABLED=0
# Used by: `middlewares/captchaMiddleware.js` — legacy bypass key.
CAPTCHA_BYPASS_KEY=

# =========================
# Misc tuning knobs
# =========================
# Used by: `controllers/certificateDraftController.js` — concurrent cert-file processing.
CERT_FILE_CONCURRENCY=4
# Used by: `services/summaryCore.js` — enable Assistants thread-split summarization (0/1).
SUMMARY_THREAD_SPLIT=0
# Used by: `services/summaryCore.js` — approximate tokens per summary part.
SUMMARY_THREAD_PART_TOKENS=6000
# Used by: `services/qaCore.js`, `controllers/conversationController.js` — chunk tokens for Q/A context building.
QA_CHUNK_TOKENS=900
# Used by: `controllers/conversationController.js` — input cap for upload ask step.
UPLOAD_ASK_INPUT_CAP=2000

# Report export retention / links
# Used by: `controllers/exportInsepctionReport.js`, `services/reportExportCleanup.js` — retention in days.
REPORT_EXPORT_RETENTION_DAYS=7
# Used by: `services/reportExportCleanup.js` — cleanup interval (ms).
REPORT_EXPORT_CLEANUP_INTERVAL_MS=3600000
# Used by: `controllers/exportInsepctionReport.js` — signed URL TTL for downloads (seconds).
REPORT_EXPORT_DOWNLOAD_URL_TTL=86400
# Used by: `controllers/exportInsepctionReport.js` — email link TTL (seconds).
REPORT_EXPORT_EMAIL_LINK_TTL=86400

# Equip docs import (error XLS retention)
# Used by: `controllers/exRegisterController.js` — TTL for error XLS artifacts (seconds).
EQUIP_DOCS_IMPORT_ERROR_XLS_TTL=86400
# Used by: `services/cleanupService.js` — retention days for error XLS artifacts.
EQUIP_DOCS_IMPORT_ERROR_XLS_RETENTION_DAYS=7

# App base URL for certs portal links (emails)
# Used by: `controllers/authController.js`, `controllers/inviteController.js`, `controllers/userController.js` — base URL for email links.
APP_BASE_URL_CERTS=https://certs.atexdb.eu

# =========================
# Legacy / Unused (kept for reference)
# =========================
# These variables are currently not used by the backend codebase, but are kept
# here to avoid confusion when migrating older deployments.
# Unused (legacy) — kept for reference only.
AZURE_REGION=
# Unused (legacy) — kept for reference only.
AZURE_FORM_RECOGNIZER_VERSION=
# Unused (legacy) — kept for reference only.
FRONTEND_URL=
# Unused (legacy) — kept for reference only.
FRONTEND_URL_PROD=
# Unused (legacy) — kept for reference only.
AZURE_REDIRECT_URI=
# Unused (legacy) — kept for reference only.
AZURE_REDIRECT_URI_PROD=
